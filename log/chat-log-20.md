# 強い CPU プレイヤーの実装

## ユーザーからの依頼

```
CPUの強いの実装をお願いします。
まずは弱いや普通の単体テストを参考に単体テストを作成してください
```

## AI の回答

強い CPU プレイヤーの実装を行います。まずは単体テストを作成して、その後に実装を進めていきましょう。

既存の弱い CPU と普通の CPU の単体テストを確認して、参考にします。

弱い CPU プレイヤーのテストと普通の CPU プレイヤーのテストを確認したところ、以下のような戦略でテストが書かれています：

1. 石を置ける場所がない場合のエラー処理
2. 特定の位置を優先的に選ぶかどうか
3. 複数の選択肢がある場合の挙動

これらを参考に、強い CPU プレイヤーのテストを作成しました。強い CPU プレイヤーは以下の戦略を持つことが想定されます：

1. 角を最も優先する（普通の CPU と同様）
2. X 打点（角の隣）を避ける
3. 端を次に優先する（普通の CPU と同様）
4. 盤面の評価を行い、自分の石が多くなるような手を選ぶ

テストコードでは以下のケースをカバーしています：

1. 相手の石を挟める場所がない場合はエラーをスローする
2. 角が選択肢にある場合は角を最優先で選択する
3. X 打点（角の隣）の位置は可能な限り避ける
4. 角がなく、X 打点以外の端がある場合は端を優先的に選択する
5. 角も端もない場合は、最も多くの石を取れる手を選択する
6. 同じ評価値の手が複数ある場合はその中からランダムに選択する

これらのテストケースに基づいて、強い CPU プレイヤーの実装を行いました。

実装では以下の機能を含めています：

1. マスの位置の種類（角、X 打点、端、その他）を判定する関数
2. 位置の評価値に基づいて並べ替える関数
3. 各位置で裏返せる石の数を考慮した評価

最終的な実装は、以下の戦略を持つ強い CPU プレイヤーとなりました：

1. 角を最優先で取る
2. X 打点（角の隣）の位置を可能な限り避ける
3. 角がなければ端を優先的に選択する
4. 角も端もない場合は、最も多くの石を裏返せる手を選択する
5. 同じ評価値の手が複数ある場合はその中からランダムに選択する

テストを実行して、実装が正しく動作することを確認しました。

## ユーザーからのフィードバック

```
npm run format でフォーマット後に変更した内容のコミットをお願いします
```

## AI の対応

フォーマットを実行し、強い CPU プレイヤーの実装を以下のようにコミットしました：

```
✨ [New Feature]: 強いCPUプレイヤーの実装を追加
```

以下の 2 つのファイルをコミットしました：

- `strong-cpu-player.test.ts` - 強い CPU プレイヤーのテスト
- `strong-cpu-player.ts` - 強い CPU プレイヤーの実装

強い CPU プレイヤーの実装によって、以下の戦略的な打ち方を実現しています：

1. 角を最優先で取る戦略
2. X 打点（角の隣）を避ける戦略
3. 端を優先的に選ぶ戦略
4. 最も多くの石を裏返せる手を選ぶ戦略

これにより、より高度な戦略で打つ CPU プレイヤーが実装されました。
